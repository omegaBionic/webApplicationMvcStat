@model IEnumerable<WebApplicationMVCStat.Models.Statistics>

@{
    ViewBag.Title = "Index";
}



<img src="data:image/png;base64,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" />




<h2>@ViewData["StatTitle"]</h2>
<div id="jsGrid"></div>
<table id="tb_hidden" hidden="hidden">
    @foreach (var item in Model)
    {

        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Score) %
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Academy.Name) @ViewData["Area"]  @Html.DisplayFor(modelItem => item.Academy.Area)
            </td>

        </tr>
    }
</table>
<table id="tb_top" class="table">

    <tr>
        <th>
            Résultats
            <select id="filterResults" onchange="sortByResult()">
                <option>
                    Filtrer
                </option>
                @foreach (string item in ViewBag.results)
                {

                    <option>
                        @item
                    </option>
                }
            </select>
        </th>
        <th>
            Score
            <input placeholder="between that" id="filterScoreLower" type="number" onchange="filterByScoreLow()" />
            <input placeholder="and that" id="filterScoreUpper" type="number" onchange="filterByScoreHigh()" />
        </th>
        <th>
            Académies
            <input placeholder="filter" id="filter" type="text" onchange="sortByAcademy()" />
        </th>

    </tr>
</table>    
<p>
    @ViewData["Introduction"]

</p>

<table id="tb_result" class="table">
    <tbody>
        @foreach (var item in Model)
        {

            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Score) %
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Academy.Name) @ViewData["Area"]  @Html.DisplayFor(modelItem => item.Academy.Area)
                </td>

            </tr>
        }
    </tbody>


</table>



<script>
    var listBeforeSort = document.getElementById("tb_hidden");
    function sortByResult() {
        var htmlToShow = "";
        var listResult = listBeforeSort.getElementsByTagName("tr");
        var sorter = document.getElementById("filterResults");
        var strSorter = sorter.options[sorter.selectedIndex].text;
        if (!strSorter.includes("Filtrer")) {
            for (var i = 0; i < listResult.length; i++) {
                if (listResult[i].getElementsByTagName("td")[0].textContent.includes(strSorter)) {
                    htmlToShow += "<tr>" + listResult[i].innerHTML + "</tr>";
                }
            }
            document.getElementById("tb_result").innerHTML = "";
            document.getElementById("tb_result").innerHTML = htmlToShow;
        } else {
            document.getElementById("tb_result").innerHTML = listBeforeSort.innerHTML;
        }
    }

    function sortByAcademy() {
        var htmlToShow = "";
        var listResult = listBeforeSort.getElementsByTagName("tr");
        var sorter = document.getElementById("filter");
        var strSorter = sorter.value;
        if (!strSorter == "") {
            for (var i = 0; i < listResult.length; i++) {
                if (listResult[i].getElementsByTagName("td")[2].textContent.includes(strSorter)) {
                    htmlToShow += "<tr>" + listResult[i].innerHTML + "</tr>";
                }
            }
            document.getElementById("tb_result").innerHTML = "";
            document.getElementById("tb_result").innerHTML = htmlToShow;
        } else {
            document.getElementById("tb_result").innerHTML = listBeforeSort.innerHTML;
        }
    }

    function filterByScoreLow() {
        var htmlToShow = "";
        var listResult = listBeforeSort.getElementsByTagName("tr");
        var sorterLow = document.getElementById("filterScoreLower");
        var strSorterLow = sorterLow.value.split(" ")[0].replace(",", ".");
        var sorterHigh = document.getElementById("filterScoreUpper");
        var strSorterHigh = sorterHigh.value.split(" ")[0].replace(",", ".");
        console.log(parseInt(strSorterLow));
        if (!strSorterLow == "") {
            for (var i = 0; i < listResult.length; i++) {
                var val = parseInt(listResult[i].getElementsByTagName("td")[1].textContent.split(",")[0] + "." + listResult[i].getElementsByTagName("td")[1].textContent.split(",")[1]);
                if (strSorterHigh != "") {
                    if (val > strSorterLow && val < strSorterHigh) {
                        htmlToShow += "<tr>" + listResult[i].innerHTML + "</tr>";
                    }
                } else {
                    if (val > strSorterLow) {
                        htmlToShow += "<tr>" + listResult[i].innerHTML + "</tr>";
                    }
                }
            }
            document.getElementById("tb_result").innerHTML = "";
            document.getElementById("tb_result").innerHTML = htmlToShow;
        } else {
            document.getElementById("tb_result").innerHTML = listBeforeSort.innerHTML;
        }
    }

    function filterByScoreHigh() {
        var htmlToShow = "";
        var listResult = listBeforeSort.getElementsByTagName("tr");
        var sorterLow = document.getElementById("filterScoreLower");
        var strSorterLow = sorterLow.value;
        var sorterHigh = document.getElementById("filterScoreUpper");
        var strSorterHigh = sorterHigh.value;
        console.log(strSorterLow);
        if (!strSorterHigh == "") {
            for (var i = 0; i < listResult.length; i++) {
                var val = parseInt(listResult[i].getElementsByTagName("td")[1].textContent.split(",")[0] + "." + listResult[i].getElementsByTagName("td")[1].textContent.split(",")[1]);
                if (strSorterLow != "") {
                    if (val > strSorterLow && val < strSorterHigh) {
                        htmlToShow += "<tr>" + listResult[i].innerHTML + "</tr>";
                    }
                } else {
                    if (val < strSorterHigh) {
                        htmlToShow += "<tr>" + listResult[i].innerHTML + "</tr>";
                    }
                }
            }
            document.getElementById("tb_result").innerHTML = "";
            document.getElementById("tb_result").innerHTML = htmlToShow;
        } else {
            document.getElementById("tb_result").innerHTML = listBeforeSort.innerHTML;
        }
    }

</script>

